<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulation SD-WAN: Équilibrage de Charge WAN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 font-sans flex flex-col min-h-screen">

    <header class="bg-gray-800 p-4 shadow-lg">
        <h1 class="text-3xl font-bold text-center text-cyan-400">
            <i class="fas fa-network-wired mr-2"></i>Simulation SD-WAN: Équilibrage de Charge WAN
        </h1>
    </header>

    <div class="flex-grow flex flex-col lg:flex-row p-4 gap-4">
        <!-- Colonne des contrôles -->
        <aside class="lg:w-1/3 bg-gray-800 p-6 rounded-lg shadow-xl space-y-6 overflow-y-auto" style="max-height: calc(100vh - 100px);">
            <div>
                <h2 class="text-xl font-semibold text-cyan-400 mb-3 border-b border-gray-700 pb-2">
                    <i class="fas fa-cogs mr-2"></i>Configuration du Réseau
                </h2>
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="numSites" class="block text-sm font-medium text-gray-300">Nombre de Succursales (2-4):</label>
                        <select id="numSites" class="mt-1 block w-full bg-gray-700 border-gray-600 text-gray-200 rounded-md shadow-sm focus:ring-cyan-500 focus:border-cyan-500 p-2">
                            <option value="2">2</option>
                            <option value="3" selected>3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                    <div>
                        <label for="numHosts" class="block text-sm font-medium text-gray-300">Hôtes par Succursale (1-5):</label>
                        <select id="numHosts" class="mt-1 block w-full bg-gray-700 border-gray-600 text-gray-200 rounded-md shadow-sm focus:ring-cyan-500 focus:border-cyan-500 p-2">
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                </div>
                <button id="applyNetworkConfig" class="w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-md transition duration-150 ease-in-out">
                    <i class="fas fa-sync-alt mr-2"></i>Appliquer Configuration Réseau
                </button>
            </div>

            <div id="wanLinksConfigContainer" class="space-y-3">
                <h3 class="text-lg font-semibold text-cyan-400 mt-4 border-b border-gray-700 pb-2">
                    <i class="fas fa-route mr-2"></i>Configuration des Liens WAN
                </h3>
                <!-- Les liens WAN seront ajoutés ici par JS -->
            </div>
             <button id="addWanLink" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-150 ease-in-out mt-2">
                <i class="fas fa-plus-circle mr-2"></i>Ajouter un Lien WAN
            </button>


            <div>
                <h2 class="text-xl font-semibold text-cyan-400 mb-3 mt-6 border-b border-gray-700 pb-2">
                    <i class="fas fa-sliders-h mr-2"></i>Paramètres de Simulation
                </h2>
                <div class="mb-4">
                    <label for="algorithm" class="block text-sm font-medium text-gray-300">Algorithme d'équilibrage:</label>
                    <select id="algorithm" class="mt-1 block w-full bg-gray-700 border-gray-600 text-gray-200 rounded-md shadow-sm focus:ring-cyan-500 focus:border-cyan-500 p-2">
                        <option value="round-robin">Round Robin Simple</option>
                        <option value="weighted-round-robin">Round Robin Pondéré</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="packetRate" class="block text-sm font-medium text-gray-300">Paquets par seconde (rythme): <span id="packetRateValue">5</span></label>
                    <input type="range" id="packetRate" min="1" max="20" value="5" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-cyan-500">
                </div>
                <div class="mb-4">
                    <label for="totalPackets" class="block text-sm font-medium text-gray-300">Nombre total de paquets (0 pour infini):</label>
                    <input type="number" id="totalPackets" value="100" min="0" class="mt-1 block w-full bg-gray-700 border-gray-600 text-gray-200 rounded-md shadow-sm focus:ring-cyan-500 focus:border-cyan-500 p-2">
                </div>
                <div class="mb-4">
                    <label for="animationSpeed" class="block text-sm font-medium text-gray-300">Vitesse d'animation: <span id="animationSpeedValue">50</span></label>
                    <input type="range" id="animationSpeed" min="10" max="200" value="50" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-cyan-500">
                </div>

                <div class="flex gap-4">
                    <button id="startButton" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-md transition duration-150 ease-in-out">
                        <i class="fas fa-play mr-2"></i>Démarrer
                    </button>
                    <button id="stopButton" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-md transition duration-150 ease-in-out" disabled>
                        <i class="fas fa-stop mr-2"></i>Arrêter
                    </button>
                </div>
            </div>
        </aside>

        <!-- Zone de Simulation et Statistiques -->
        <main class="lg:w-2/3 flex flex-col gap-4">
            <div class="flex-grow bg-gray-800 p-2 rounded-lg shadow-xl relative" id="simulationAreaContainer">
                 <canvas id="simulationCanvas" class="bg-gray-800 rounded-md"></canvas>
            </div>
            <div class="bg-gray-800 p-6 rounded-lg shadow-xl h-auto lg:h-64" id="statsArea">
                <h2 class="text-xl font-semibold text-cyan-400 mb-3 border-b border-gray-700 pb-2">
                    <i class="fas fa-chart-bar mr-2"></i>Statistiques de Répartition
                </h2>
                <div id="statsContent" class="text-sm space-y-2 overflow-y-auto" style="max-height: 200px;">
                    <p class="text-gray-400">La simulation n'a pas encore démarré ou aucune donnée n'est disponible.</p>
                </div>
                 <div id="statsChartContainer" class="mt-4">
                    <canvas id="statsChartCanvas"></canvas>
                </div>
            </div>
        </main>
    </div>

    <footer class="bg-gray-800 p-6 mt-auto shadow-lg">
        <h2 class="text-xl font-semibold text-cyan-400 mb-3">
            <i class="fas fa-info-circle mr-2"></i>Note Pédagogique
        </h2>
        <p class="text-sm text-gray-300 leading-relaxed">
            <strong>Équilibrage de Charge SD-WAN vs. Équilibrage de Serveurs Classique :</strong>
        </p>
        <ul class="list-disc list-inside text-sm text-gray-400 mt-2 space-y-1">
            <li>
                L'<strong>équilibrage de charge de serveurs (Load Balancing classique)</strong> répartit les requêtes des utilisateurs (ex: requêtes HTTP) entre plusieurs serveurs d'une même application. L'objectif est d'améliorer la performance et la disponibilité de l'application en évitant la surcharge d'un unique serveur. Cela se passe typiquement au niveau applicatif (Couche 7) ou transport (Couche 4) au sein d'un datacenter ou d'un cluster de serveurs.
            </li>
            <li>
                L'<strong>équilibrage de charge SD-WAN (WAN Load Balancing)</strong>, illustré ici, concerne la répartition du trafic réseau (paquets IP) entre plusieurs liaisons WAN (Internet, MPLS, 4G/5G, etc.) connectant différents sites d'une entreprise (ex: siège et succursales). L'objectif est d'optimiser l'utilisation de la bande passante disponible sur l'ensemble des liens, d'améliorer la résilience (basculement en cas de panne d'un lien), et de choisir le meilleur chemin pour chaque type de trafic en fonction de ses besoins (latence, bande passante). Cela se passe au niveau réseau (Couche 3). On optimise les "tuyaux" entre les sites, pas les serveurs au sein d'un site.
            </li>
        </ul>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script src="script.js"></script>
</body>
</html>